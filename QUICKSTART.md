# å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ¯ é€‰æ‹©ä½ çš„æ“ä½œç³»ç»Ÿ

### Windows ç”¨æˆ· â†’ [è·³è½¬åˆ° Windows è¯´æ˜](#windows-å¿«é€Ÿå¯åŠ¨)
### Linux/macOS ç”¨æˆ· â†’ [è·³è½¬åˆ° Linux è¯´æ˜](#linuxmacos-å¿«é€Ÿå¯åŠ¨)

---

## Windows å¿«é€Ÿå¯åŠ¨

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

æ‰“å¼€ PowerShellï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼š

```powershell
cd c:\Users\Administrator\Desktop\SharkDataSever
npm install
```

ç­‰å¾…æ‰€æœ‰ä¾èµ–å®‰è£…å®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰ã€‚

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨

**æ–¹æ³•ä¸€ï¼šåŒå‡»å¯åŠ¨ï¼ˆæ¨èï¼‰**
```
ç›´æ¥åŒå‡» start.bat æ–‡ä»¶
```

**æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨**

```powershell
npm start
```

æˆ–è€…ï¼š

```powershell
node server.js
```

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æœåŠ¡

#### æµ‹è¯• MQTT æœåŠ¡

**æ–¹æ³•ä¸€ï¼šåŒå‡»å¯åŠ¨**
```
åŒå‡» test-mqtt.bat æ–‡ä»¶
```

**æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨**

```powershell
cd c:\Users\Administrator\Desktop\SharkDataSever
node test-mqtt-client.js
```

ä½ åº”è¯¥èƒ½çœ‹åˆ°æ¯3ç§’æ¥æ”¶åˆ°ä¸€æ¬¡ Protobuf æ ¼å¼çš„æœºå™¨äººæ•°æ®ã€‚

#### æµ‹è¯• UDP è§†é¢‘æµ

**æ–¹æ³•ä¸€ï¼šåŒå‡»å¯åŠ¨**
```
åŒå‡» test-udp.bat æ–‡ä»¶
```

**æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨**

```powershell
cd c:\Users\Administrator\Desktop\SharkDataSever
node test-udp-client.js
```

ä½ åº”è¯¥èƒ½çœ‹åˆ°æŒç»­æ¥æ”¶åˆ° HEVC è§†é¢‘æµæ•°æ®åŒ…ã€‚

---

## Linux/macOS å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•ä¸€ï¼šäº¤äº’å¼å®‰è£…è„šæœ¬ï¼ˆæœ€ç®€å•ï¼Œæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd SharkDataSever

# 2. æ·»åŠ æ‰§è¡Œæƒé™
chmod +x install-and-run.sh

# 3. è¿è¡Œäº¤äº’å¼è„šæœ¬
./install-and-run.sh
```

ç„¶åä»èœå•ä¸­é€‰æ‹©æ“ä½œï¼š
- é€‰é¡¹ 1ï¼šå¯åŠ¨æœåŠ¡å™¨
- é€‰é¡¹ 2ï¼šæµ‹è¯• MQTT å®¢æˆ·ç«¯
- é€‰é¡¹ 3ï¼šæµ‹è¯• UDP è§†é¢‘æµå®¢æˆ·ç«¯
- é€‰é¡¹ 4ï¼šåŒæ—¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæ¨èï¼‰

### æ–¹æ³•äºŒï¼šä½¿ç”¨ç‹¬ç«‹è„šæœ¬

#### ç¬¬ä¸€æ­¥ï¼šæ·»åŠ æ‰§è¡Œæƒé™

```bash
chmod +x start.sh test-mqtt.sh test-udp.sh
```

#### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨

```bash
./start.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥ Node.js å’Œ npm
- âœ… å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
- âœ… æ£€æŸ¥è§†é¢‘æºæ–‡ä»¶
- âœ… å¯åŠ¨æœåŠ¡å™¨

#### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æœåŠ¡

**æµ‹è¯• MQTTï¼ˆæ‰“å¼€æ–°ç»ˆç«¯ï¼‰**
```bash
cd SharkDataSever
./test-mqtt.sh
```

**æµ‹è¯• UDPï¼ˆå†æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼‰**
```bash
cd SharkDataSever
./test-udp.sh
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡å™¨
npm start

# æµ‹è¯•ï¼ˆæ–°ç»ˆç«¯ï¼‰
node test-mqtt-client.js
node test-udp-client.js
```

---

## åœæ­¢æœåŠ¡

åœ¨ä»»ä½•è¿è¡Œçš„çª—å£ä¸­æŒ‰ `Ctrl+C` å³å¯åœæ­¢æœåŠ¡ã€‚

---

## ğŸ“‹ å®Œæ•´è„šæœ¬åˆ—è¡¨

### Windows è„šæœ¬
- `start.bat` - å¯åŠ¨æœåŠ¡å™¨
- `test-mqtt.bat` - MQTT æµ‹è¯•å®¢æˆ·ç«¯
- `test-udp.bat` - UDP æµ‹è¯•å®¢æˆ·ç«¯

### Linux/macOS è„šæœ¬
- `start.sh` - å¯åŠ¨æœåŠ¡å™¨
- `test-mqtt.sh` - MQTT æµ‹è¯•å®¢æˆ·ç«¯
- `test-udp.sh` - UDP æµ‹è¯•å®¢æˆ·ç«¯
- `install-and-run.sh` - äº¤äº’å¼å®‰è£…å’Œè¿è¡Œï¼ˆæ¨èï¼‰

---

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ‰¾ä¸åˆ°è§†é¢‘æ–‡ä»¶
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿ `VideoSource` æ–‡ä»¶å¤¹ä¸­æœ‰è§†é¢‘æ–‡ä»¶ï¼ˆå¦‚ 1111.mp4ï¼‰

### é—®é¢˜ï¼šç«¯å£è¢«å ç”¨
**è§£å†³æ–¹æ¡ˆ**ï¼š
- Windows: `netstat -ano | findstr :3333`
- Linux/macOS: `lsof -i :3333`

ä¿®æ”¹ `server.js` ä¸­çš„ç«¯å£é…ç½®ï¼Œæˆ–å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº

### é—®é¢˜ï¼šPermission denied (Linux/macOS)
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
chmod +x *.sh
```

### é—®é¢˜ï¼šä¾èµ–å®‰è£…å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# Windows
Remove-Item -Recurse -Force node_modules
npm install

# Linux/macOS
rm -rf node_modules package-lock.json
npm install

# æˆ–ä½¿ç”¨æ·˜å®é•œåƒ
npm install --registry=https://registry.npmmirror.com
```

### é—®é¢˜ï¼šFFmpeg é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è§†é¢‘æ–‡ä»¶æ˜¯å¦æŸå
2. å°è¯•ä½¿ç”¨å…¶ä»–æ ¼å¼çš„è§†é¢‘æ–‡ä»¶
3. ç­‰å¾…è‡ªåŠ¨é‡è¯•ï¼ˆæœåŠ¡å™¨ä¼šåœ¨5ç§’åé‡è¯•ï¼‰

---

## ğŸ“– æ›´å¤šä¿¡æ¯

### Windows ç”¨æˆ·
- è¯¦ç»†å®‰è£…è¯´æ˜ï¼šæŸ¥çœ‹ [INSTALL.md](./INSTALL.md)
- å®Œæ•´æ–‡æ¡£ï¼šæŸ¥çœ‹ [README.md](./README.md)

### Linux/macOS ç”¨æˆ·
- Linux ä½¿ç”¨æŒ‡å—ï¼šæŸ¥çœ‹ [LINUX-GUIDE.md](./LINUX-GUIDE.md)
- è„šæœ¬è¯´æ˜ï¼šæŸ¥çœ‹ [SCRIPTS-GUIDE.md](./SCRIPTS-GUIDE.md)
- å®Œæ•´æ–‡æ¡£ï¼šæŸ¥çœ‹ [README.md](./README.md)

---

## æœåŠ¡ä¿¡æ¯

- **MQTT Broker**: mqtt://127.0.0.1:3333
- **UDP è§†é¢‘æµ**: 127.0.0.1:3334
- **MQTT ä¸»é¢˜**: robot/data
- **æ•°æ®æ ¼å¼**: Protobuf (å®šä¹‰åœ¨ proto/messages.proto)
- **è§†é¢‘ç¼–ç **: HEVC (H.265)
- **å‘é€é¢‘ç‡**: 
  - MQTT: æ¯3ç§’ä¸€æ¬¡
  - UDP: å®æ—¶æµå¼ä¼ è¾“

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

é€‰æ‹©é€‚åˆä½ çš„æ“ä½œç³»ç»Ÿçš„æ–¹æ³•ï¼Œç«‹å³å¼€å§‹å§ï¼

**Windows ç”¨æˆ·**ï¼šåŒå‡» `start.bat` å³å¯å¼€å§‹
**Linux/macOS ç”¨æˆ·**ï¼šè¿è¡Œ `./install-and-run.sh` ä½¿ç”¨äº¤äº’å¼èœå•

---

## ä¸‹ä¸€æ­¥

æŸ¥çœ‹ `README.md` äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œé«˜çº§é…ç½®é€‰é¡¹ã€‚
